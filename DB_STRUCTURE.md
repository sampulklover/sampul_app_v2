-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.accounts (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL UNIQUE,
  is_subscribed boolean DEFAULT false,
  stripe_interval text,
  stripe_customer text UNIQUE,
  stripe_product text,
  ref_product_key text DEFAULT 'P0001'::text,
  stripe_price_id text,
  kyc_status USER-DEFINED,
  chip_customer_id text UNIQUE,
  CONSTRAINT accounts_pkey PRIMARY KEY (id),
  CONSTRAINT public_accounts_ref_product_key_fkey FOREIGN KEY (ref_product_key) REFERENCES public.products(ref_key),
  CONSTRAINT public_accounts_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.aftercare (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL,
  task text NOT NULL,
  is_completed boolean DEFAULT false,
  is_pinned boolean DEFAULT false,
  category USER-DEFINED,
  CONSTRAINT aftercare_pkey PRIMARY KEY (id),
  CONSTRAINT aftercare_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.agents (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL,
  organization_id uuid NOT NULL,
  organization_name character varying NOT NULL,
  request_message text,
  status character varying DEFAULT 'pending'::character varying CHECK (status::text = ANY (ARRAY['pending'::character varying::text, 'approved'::character varying::text, 'rejected'::character varying::text])),
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  profile_id bigint,
  rejection_reason text,
  agent_status character varying DEFAULT NULL::character varying CHECK (agent_status IS NULL OR (agent_status::text = ANY (ARRAY['active'::character varying::text, 'suspended'::character varying::text, 'inactive'::character varying::text]))),
  CONSTRAINT agents_pkey PRIMARY KEY (id),
  CONSTRAINT organization_join_requests_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id),
  CONSTRAINT organization_join_requests_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES public.profiles(id),
  CONSTRAINT organization_join_requests_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.beloved (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL,
  name text NOT NULL,
  phone_no text,
  email text,
  relationship USER-DEFINED,
  image_path text,
  type USER-DEFINED NOT NULL,
  nric_no text,
  level USER-DEFINED NOT NULL DEFAULT 'others'::beloved_level,
  address_1 text,
  address_2 text,
  city text,
  postcode text,
  country USER-DEFINED,
  state text,
  percentage numeric NOT NULL DEFAULT 0.00 CHECK (percentage >= 0.00 AND percentage <= 100.00),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT beloved_pkey PRIMARY KEY (id),
  CONSTRAINT public_beloved_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.beloved_invites (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  beloved_id bigint,
  email text,
  invite_uuid uuid NOT NULL,
  invite_status USER-DEFINED,
  uuid uuid NOT NULL,
  invited_uuid uuid,
  email_resend_id text UNIQUE,
  email_status text,
  CONSTRAINT beloved_invites_pkey PRIMARY KEY (id),
  CONSTRAINT public_beloved_invites_beloved_id_fkey FOREIGN KEY (beloved_id) REFERENCES public.beloved(id),
  CONSTRAINT public_beloved_invites_invited_uuid_fkey FOREIGN KEY (invited_uuid) REFERENCES public.profiles(uuid),
  CONSTRAINT public_beloved_invites_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.bodies (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  website_url text,
  category USER-DEFINED NOT NULL,
  icon text,
  active boolean NOT NULL DEFAULT true,
  featured boolean DEFAULT false,
  CONSTRAINT bodies_pkey PRIMARY KEY (id)
);
CREATE TABLE public.careers (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  category USER-DEFINED NOT NULL,
  title text NOT NULL,
  description text NOT NULL,
  city text NOT NULL,
  is_active boolean NOT NULL DEFAULT true,
  country USER-DEFINED,
  uuid uuid NOT NULL,
  uid text UNIQUE,
  CONSTRAINT careers_pkey PRIMARY KEY (id),
  CONSTRAINT careers_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.clients (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  agent_id uuid,
  user_id uuid,
  status text,
  consent_status text,
  temporary_password text,
  id uuid NOT NULL DEFAULT gen_random_uuid() UNIQUE,
  updated_at timestamp with time zone,
  notes text,
  organization_id uuid,
  profile_id bigint,
  consent_received_at timestamp with time zone,
  consent_ip_address inet,
  deletion_ip_address inet,
  deletion_requested_at timestamp with time zone,
  CONSTRAINT clients_pkey PRIMARY KEY (id),
  CONSTRAINT clients_agent_id_fkey FOREIGN KEY (agent_id) REFERENCES public.agents(id),
  CONSTRAINT clients_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id),
  CONSTRAINT clients_profile_id_fkey FOREIGN KEY (profile_id) REFERENCES public.profiles(id),
  CONSTRAINT clients_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.contact_us (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  email text NOT NULL,
  name text NOT NULL,
  message text NOT NULL,
  CONSTRAINT contact_us_pkey PRIMARY KEY (id)
);
CREATE TABLE public.digital_assets (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  username text,
  email text,
  uuid uuid,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  account_type USER-DEFINED,
  frequency USER-DEFINED,
  declared_value_myr double precision NOT NULL,
  instructions_after_death USER-DEFINED NOT NULL,
  beloved_id bigint,
  remarks text,
  new_service_platform_name text,
  new_service_platform_url text,
  bodies_id bigint,
  protection boolean,
  new_service_platform_logo_url text,
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT digital_assets_pkey PRIMARY KEY (id),
  CONSTRAINT public_digital_assets_beloved_id_fkey FOREIGN KEY (beloved_id) REFERENCES public.beloved(id),
  CONSTRAINT public_digital_assets_bodies_id_fkey FOREIGN KEY (bodies_id) REFERENCES public.bodies(id),
  CONSTRAINT public_digital_assets_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.executor (
  id integer NOT NULL DEFAULT nextval('executor_id_seq'::regclass),
  executor_code text NOT NULL UNIQUE,
  name text NOT NULL,
  nric_number text NOT NULL,
  age integer,
  phone_no text,
  home_phone text,
  office_phone text,
  email text NOT NULL,
  relationship_with_deceased USER-DEFINED,
  other_relationship text,
  address_line_1 text,
  address_line_2 text,
  city text,
  postcode text,
  state text,
  country text,
  correspondence_address_line_1 text,
  correspondence_address_line_2 text,
  correspondence_city text,
  correspondence_postcode text,
  correspondence_state text,
  correspondence_country text,
  is_same_address boolean DEFAULT true,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  uuid uuid,
  CONSTRAINT executor_pkey PRIMARY KEY (id),
  CONSTRAINT executor_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.executor_deceased (
  id integer NOT NULL DEFAULT nextval('executor_deceased_id_seq'::regclass),
  executor_id integer NOT NULL UNIQUE,
  full_name text NOT NULL,
  nric_new text,
  nric_old text,
  police_army_nric text,
  date_of_death date,
  cause_of_death USER-DEFINED,
  place_of_death text,
  marital_status USER-DEFINED,
  citizenship USER-DEFINED,
  religion USER-DEFINED,
  race USER-DEFINED,
  bankrupt boolean DEFAULT false,
  will_written boolean DEFAULT false,
  will_registration_no text,
  executor text,
  will_custodian text,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  uuid uuid NOT NULL,
  CONSTRAINT executor_deceased_pkey PRIMARY KEY (id),
  CONSTRAINT executor_deceased_executor_id_fkey FOREIGN KEY (executor_id) REFERENCES public.executor(id),
  CONSTRAINT executor_deceased_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.executor_deceased_assets (
  id integer NOT NULL DEFAULT nextval('executor_deceased_assets_id_seq'::regclass),
  executor_id integer NOT NULL UNIQUE,
  immovable_assets jsonb DEFAULT '[]'::jsonb,
  movable_assets jsonb DEFAULT '[]'::jsonb,
  liabilities jsonb DEFAULT '[]'::jsonb,
  beneficiaries jsonb DEFAULT '[]'::jsonb,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  uuid uuid NOT NULL,
  CONSTRAINT executor_deceased_assets_pkey PRIMARY KEY (id),
  CONSTRAINT executor_deceased_assets_executor_id_fkey FOREIGN KEY (executor_id) REFERENCES public.executor(id),
  CONSTRAINT executor_deceased_assets_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.executor_guardian (
  id integer NOT NULL DEFAULT nextval('executor_guardian_id_seq'::regclass),
  executor_id integer NOT NULL UNIQUE,
  full_name text NOT NULL,
  nric_new text,
  nric_old text,
  police_army_nric text,
  date_of_birth date,
  age integer,
  address_line_1 text,
  address_line_2 text,
  city text,
  postcode text,
  state text,
  country USER-DEFINED,
  phone_no text,
  home_phone text,
  office_phone text,
  email text,
  relationship USER-DEFINED,
  created_at timestamp without time zone DEFAULT now(),
  updated_at timestamp without time zone DEFAULT now(),
  uuid uuid NOT NULL,
  CONSTRAINT executor_guardian_pkey PRIMARY KEY (id),
  CONSTRAINT executor_guardian_executor_id_fkey FOREIGN KEY (executor_id) REFERENCES public.executor(id),
  CONSTRAINT executor_guardian_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.extra_wishes (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL UNIQUE,
  nazar_wishes text,
  nazar_est_cost_myr double precision,
  fidyah_fast_left_days bigint,
  fidyah_amout_due_myr double precision,
  organ_donor_pledge boolean,
  waqf_bodies ARRAY,
  charity_bodies ARRAY,
  CONSTRAINT extra_wishes_pkey PRIMARY KEY (id),
  CONSTRAINT public_extra_wishes_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.hibah (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  user_id uuid NOT NULL,
  total_submissions integer NOT NULL DEFAULT 0,
  submission_status character varying NOT NULL DEFAULT 'pending_review'::character varying,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  updated_at timestamp with time zone NOT NULL DEFAULT now(),
  certificate_id text UNIQUE,
  final_agreement jsonb,
  CONSTRAINT hibah_pkey PRIMARY KEY (id),
  CONSTRAINT hibah_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.hibah_documents (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  submission_id uuid NOT NULL,
  file_name text NOT NULL,
  file_path text NOT NULL,
  file_size bigint NOT NULL,
  file_type text NOT NULL,
  document_type text NOT NULL,
  uploaded_at timestamp with time zone NOT NULL DEFAULT now(),
  hibah_group_id uuid,
  CONSTRAINT hibah_documents_pkey PRIMARY KEY (id),
  CONSTRAINT hibah_documents_hibah_group_id_fkey FOREIGN KEY (hibah_group_id) REFERENCES public.hibah_group(id),
  CONSTRAINT hibah_documents_submission_id_fkey FOREIGN KEY (submission_id) REFERENCES public.hibah(id)
);
CREATE TABLE public.hibah_group (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  hibah_id uuid NOT NULL,
  hibah_index integer NOT NULL,
  asset_type text,
  registered_title_number text,
  property_location text,
  estimated_value text,
  loan_status text,
  bank_name text,
  outstanding_loan_amount text,
  land_categories jsonb,
  beneficiaries jsonb NOT NULL DEFAULT '[]'::jsonb,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  updated_at timestamp with time zone NOT NULL DEFAULT now(),
  property_name text,
  CONSTRAINT hibah_group_pkey PRIMARY KEY (id),
  CONSTRAINT hibah_group_hibah_id_fkey FOREIGN KEY (hibah_id) REFERENCES public.hibah(id)
);
CREATE TABLE public.hibah_payments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  hibah_id uuid,
  user_id uuid,
  status text,
  amount bigint NOT NULL,
  chip_payment_id text,
  chip_client_id text,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT hibah_payments_pkey PRIMARY KEY (id),
  CONSTRAINT hibah_payments_hibah_id_fkey FOREIGN KEY (hibah_id) REFERENCES public.hibah(id),
  CONSTRAINT hibah_payments_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.inform_death (
  uuid uuid NOT NULL UNIQUE,
  nric_no text,
  nric_name text,
  image_path text,
  certification_id text,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  invite_user_uuid uuid,
  CONSTRAINT inform_death_pkey PRIMARY KEY (id),
  CONSTRAINT public_inform_death_invite_user_uuid_fkey FOREIGN KEY (invite_user_uuid) REFERENCES public.profiles(uuid),
  CONSTRAINT public_inform_death_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.newsletter (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  email text NOT NULL UNIQUE,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  CONSTRAINT newsletter_pkey PRIMARY KEY (id)
);
CREATE TABLE public.organizations (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  id uuid NOT NULL DEFAULT gen_random_uuid() UNIQUE,
  organization_name text NOT NULL,
  organization_description text,
  organization_website text,
  organization_phone text,
  organization_address text,
  contact_person_name text,
  contact_person_title text,
  contact_person_email text,
  updated_at timestamp with time zone,
  user_id uuid UNIQUE,
  has_join_password boolean DEFAULT false,
  join_password text,
  status character varying DEFAULT 'approved'::character varying CHECK (status::text = ANY (ARRAY['pending'::character varying::text, 'approved'::character varying::text, 'rejected'::character varying::text])),
  CONSTRAINT organizations_pkey PRIMARY KEY (id),
  CONSTRAINT organization_profiles_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.profiles(uuid),
  CONSTRAINT organization_profiles_user_id_fkey1 FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.physical_assets (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  username text NOT NULL,
  email text NOT NULL,
  uuid uuid,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  instructions_after_death USER-DEFINED NOT NULL,
  beloved_id bigint NOT NULL,
  remarks text,
  account_type USER-DEFINED NOT NULL,
  account_no text NOT NULL,
  loan_category USER-DEFINED NOT NULL,
  rate double precision,
  declared_value_myr double precision NOT NULL,
  tenure_start_date date NOT NULL,
  tenure_end_date date NOT NULL,
  institution USER-DEFINED NOT NULL,
  image_path text,
  uid text,
  asset_name text NOT NULL,
  CONSTRAINT physical_assets_pkey PRIMARY KEY (id),
  CONSTRAINT physical_assets_beloved_id_fkey FOREIGN KEY (beloved_id) REFERENCES public.beloved(id),
  CONSTRAINT physical_assets_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.press_blog_posts (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL,
  title text NOT NULL,
  description text NOT NULL,
  is_active boolean NOT NULL DEFAULT true,
  teaser text NOT NULL CHECK (length(teaser) < 250),
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  category USER-DEFINED,
  writer_name text NOT NULL,
  image_path text,
  uid text NOT NULL UNIQUE,
  CONSTRAINT press_blog_posts_pkey PRIMARY KEY (id),
  CONSTRAINT press_blog_posts_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.products (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  ref_key text NOT NULL UNIQUE,
  title text NOT NULL UNIQUE,
  description text NOT NULL UNIQUE,
  access_control jsonb,
  price_myr double precision,
  duration text,
  max_assets bigint,
  CONSTRAINT products_pkey PRIMARY KEY (id)
);
CREATE TABLE public.profiles (
  uuid uuid NOT NULL UNIQUE,
  nric_no text,
  dob date,
  username text,
  marital_status USER-DEFINED,
  address_1 text,
  address_2 text,
  city text,
  postcode text,
  country USER-DEFINED,
  nric_name text,
  email text NOT NULL UNIQUE,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  phone_no text,
  religion USER-DEFINED DEFAULT 'islam'::religions,
  image_path text,
  created_at timestamp with time zone DEFAULT now(),
  state text,
  system_language USER-DEFINED,
  isOnboard boolean DEFAULT false,
  is_aftercare_onboard boolean DEFAULT false,
  preferably_communication USER-DEFINED,
  created_by_organization boolean DEFAULT false,
  requires_password_reset boolean DEFAULT false,
  organization_id uuid,
  agent_id uuid,
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT profiles_pkey PRIMARY KEY (id),
  CONSTRAINT profiles_agent_id_fkey FOREIGN KEY (agent_id) REFERENCES public.agents(id),
  CONSTRAINT profiles_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organizations(id),
  CONSTRAINT profiles_uuid_fkey FOREIGN KEY (uuid) REFERENCES auth.users(id)
);
CREATE TABLE public.questions (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  title text NOT NULL,
  description text NOT NULL,
  CONSTRAINT questions_pkey PRIMARY KEY (id)
);
CREATE TABLE public.roles (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid NOT NULL UNIQUE,
  role USER-DEFINED NOT NULL,
  CONSTRAINT roles_pkey PRIMARY KEY (id),
  CONSTRAINT public_roles_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.testing (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  uuid uuid,
  CONSTRAINT testing_pkey PRIMARY KEY (id),
  CONSTRAINT testing_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.trust (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid,
  trust_code text NOT NULL UNIQUE,
  name text,
  nric_number text,
  date_of_birth date,
  gender USER-DEFINED,
  resident_status USER-DEFINED,
  nationality USER-DEFINED,
  phone_no text,
  email text,
  address_line_1 text,
  address_line_2 text,
  city text,
  postcode text,
  state text,
  country USER-DEFINED,
  estimated_net_worth USER-DEFINED,
  source_of_fund text,
  purpose_of_transaction text,
  employer_name text,
  business_nature text,
  business_address_line_1 text,
  business_address_line_2 text,
  business_city text,
  business_postcode text,
  business_state text,
  business_country USER-DEFINED,
  dob date,
  CONSTRAINT trust_pkey PRIMARY KEY (id),
  CONSTRAINT trust_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.trust_beneficiary (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  uuid uuid,
  name text,
  nric_passport_number text,
  date_of_birth date,
  gender USER-DEFINED,
  resident_status USER-DEFINED,
  nationality USER-DEFINED,
  telephone_mobile text,
  email text,
  address_line_1 text,
  address_line_2 text,
  city text,
  postcode text,
  state_province text,
  country USER-DEFINED,
  phone_no text,
  relationship text,
  trust_id bigint,
  monthly_distribution_living bigint,
  monthly_distribution_education bigint,
  medical_expenses boolean,
  education_expenses boolean,
  settle_outstanding boolean,
  invest_market boolean,
  invest_unit boolean,
  mentally_incapacitated boolean,
  CONSTRAINT trust_beneficiary_pkey PRIMARY KEY (id),
  CONSTRAINT trust_beneficiary_trust_id_fkey FOREIGN KEY (trust_id) REFERENCES public.trust(id),
  CONSTRAINT trust_beneficiary_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.trust_charity (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  organization_name text NOT NULL,
  uuid uuid,
  address_line_1 text,
  address_line_2 text,
  city text,
  postcode text,
  state text,
  country text,
  category USER-DEFINED,
  bank USER-DEFINED,
  account_number text,
  donation_amount double precision,
  donation_duration USER-DEFINED,
  email text,
  phone_no text,
  trust_id bigint,
  CONSTRAINT trust_charity_pkey PRIMARY KEY (id),
  CONSTRAINT charity_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid),
  CONSTRAINT trust_charity_trust_id_fkey FOREIGN KEY (trust_id) REFERENCES public.trust(id)
);
CREATE TABLE public.trust_payment (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  trust_id bigint UNIQUE,
  image_path text,
  payment_method USER-DEFINED,
  uuid uuid,
  total_amount double precision,
  trust_amount double precision,
  CONSTRAINT trust_payment_pkey PRIMARY KEY (id),
  CONSTRAINT trust_payment_trust_id_fkey FOREIGN KEY (trust_id) REFERENCES public.trust(id),
  CONSTRAINT trust_payment_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.trust_payments (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  trust_id bigint,
  uuid uuid,
  status text,
  amount bigint NOT NULL CHECK (amount::numeric > 0::numeric),
  chip_client_id text,
  chip_payment_id text UNIQUE,
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT trust_payments_pkey PRIMARY KEY (id),
  CONSTRAINT trust_payments_trust_id_fkey FOREIGN KEY (trust_id) REFERENCES public.trust(id),
  CONSTRAINT trust_payments_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.verification (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  service_name text NOT NULL,
  uuid uuid NOT NULL,
  session_id text NOT NULL UNIQUE,
  status text,
  CONSTRAINT verification_pkey PRIMARY KEY (id),
  CONSTRAINT verification_sessions_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);
CREATE TABLE public.wills (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  will_code text NOT NULL UNIQUE,
  last_updated timestamp with time zone NOT NULL,
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL UNIQUE,
  uuid uuid NOT NULL UNIQUE,
  nric_name text,
  co_sampul_1 bigint UNIQUE,
  co_sampul_2 bigint UNIQUE,
  guardian_1 bigint UNIQUE,
  guardian_2 bigint UNIQUE,
  is_draft boolean,
  CONSTRAINT wills_pkey PRIMARY KEY (id),
  CONSTRAINT public_wills_co_sampul_1_fkey FOREIGN KEY (co_sampul_1) REFERENCES public.beloved(id),
  CONSTRAINT public_wills_co_sampul_2_fkey FOREIGN KEY (co_sampul_2) REFERENCES public.beloved(id),
  CONSTRAINT public_wills_guardian_1_fkey FOREIGN KEY (guardian_1) REFERENCES public.beloved(id),
  CONSTRAINT public_wills_guardian_2_fkey FOREIGN KEY (guardian_2) REFERENCES public.beloved(id),
  CONSTRAINT public_wills_uuid_fkey FOREIGN KEY (uuid) REFERENCES public.profiles(uuid)
);